<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
        <title>Keyboard Visualization</title>
        <meta name="description" content="This is a demonstration of a keyboard heatmap visualizing character distribution of text" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" href="style.css" />
        <script src="http://code.jquery.com/jquery-2.1.0.min.js"></script>
    </head>
    <body>
        <div id="wrapper">
            <div id="header">
            <h1>Visualizing character distribution of texts on a keyboard </h1>
        </div>
        <div id="customize">
            <div id="customizearea">
                <label>Select a keyboard layout</label>
                <select id="layout">
                    <option value="ASSET">Asset</option>
                    <option value="CARPALX_QFMLWY">Carpalx QFMLWY</option>
                    <option value="COLEMAK">Colemak</option>
                    <option value="DVORAK">Dvorak</option>
                    <option value="DVORAK_PROGRAMMER">Dvorak Programmer</option>
                    <option value="MINIMAK_4K">Minimak 4-Keys</option>
                    <option value="MINIMAK_8K">Minimak 8-Keys</option>
                    <option value="MINIMAK_12K">Minimak 12-Keys</option>
                    <option value="NORMAN">Norman</option>
                    <option value="QWERTY" selected>QWERTY</option>
                    <option value="WORKMAN">Workman</option>
                </select>
                <div id="apply" class="button">
                    Select layout
                </div>
            </div>
        </div>
            <div id="keyboard">

            </div>
            <div id="footer">
            </div>
        </div>
        <script type="text/javascript">
            var app = {};
            app.config = {
                exclude: true
            };
        </script>
        <script src="heatmap.js"></script>
        <script src="keyboard-layouts.js"></script>
        <script type="text/javascript">
            (function(){

                app.init = function initialize(){
                    var cfg = arguments[0] || {};
                    var config = {};

                    config.element = "keyboard";
                    config.radius = cfg.radius || 50;
                    config.visible = true;
                    config.opacity = 40;
                    if(cfg.gradient)
                        config.gradient = cfg.gradient;

                    app.coordinates = app.LAYOUTS[cfg.layout || "QWERTY"];

                    // set the keyboard image
                    if(cfg.layout)
                       $("keyboard").style.backgroundImage = "url(img/"+cfg.layout+".png)";

                    var heatmap = h337.create(config);
                    app.heatmap = heatmap;
                };
                app.init();

                //var counts = {"q": 2,"w": 3,"e": 4,"r": 3,"t": 2,"y": 4,"u": 2, "i": 2,"o": 1,"p": 4, ":":3 };

                var counts = {"'": 21, "-": 1, ",": 0, "/": 6, ".": 8, ";": 5, "=": 0, "[": 0, "]": 0, "\\": 12, "a": 196, "`": 1788, "c": 111, "b": 160, "e": 233, "d": 82, "g": 1429, "f": 18, "i": 77, "h": 47, "k": 32, "j": 2, "m": 22, "l": 60, "o": 142, "n": 115, "q": 113, "p": 37, "s": 809, "r": 287, "u": 62, "t": 82, "w": 116, "v": 79, "y": 67, "x": 241, "z": 38};

                var digrams = {"'": {"-": 0, ",": 0, "/": 0, ".": 0, ";": 0, "=": 0, "[": 0, "]": 0, "\\": 0, "a": 0, "`": 0, "c": 0, "b": 0, "e": 1, "d": 0, "g": 0, "f": 0, "i": 5, "h": 0, "k": 0, "j": 0, "m": 0, "l": 0, "o": 0, "n": 2, "q": 0, "p": 0, "s": 12, "r": 0, "u": 0, "t": 6, "w": 0, "v": 0, "y": 2, "x": 0, "z": 0}, "-": {"'": 0, ",": 0, "/": 0, ".": 0, ";": 0, "=": 0, "[": 0, "]": 0, "\\": 0, "a": 0, "`": 0, "c": 0, "b": 0, "e": 0, "d": 0, "g": 0, "f": 0, "i": 0, "h": 0, "k": 0, "j": 0, "m": 0, "l": 0, "o": 0, "n": 0, "q": 0, "p": 0, "s": 0, "r": 0, "u": 0, "t": 0, "w": 0, "v": 1, "y": 0, "x": 0, "z": 0}, ",": {"'": 0, "-": 0, "/": 0, ".": 0, ";": 0, "=": 0, "[": 0, "]": 0, "\\": 0, "a": 0, "`": 0, "c": 0, "b": 0, "e": 0, "d": 0, "g": 0, "f": 0, "i": 0, "h": 0, "k": 0, "j": 0, "m": 0, "l": 0, "o": 0, "n": 0, "q": 0, "p": 0, "s": 0, "r": 0, "u": 0, "t": 0, "w": 0, "v": 0, "y": 0, "x": 0, "z": 0}, "/": {"'": 0, "-": 0, ",": 0, ".": 0, ";": 0, "=": 0, "[": 0, "]": 0, "\\": 0, "a": 0, "`": 0, "c": 1, "b": 0, "e": 2, "d": 0, "g": 0, "f": 0, "i": 0, "h": 0, "k": 0, "j": 0, "m": 0, "l": 0, "o": 0, "n": 0, "q": 0, "p": 0, "s": 1, "r": 0, "u": 0, "t": 0, "w": 0, "v": 0, "y": 0, "x": 0, "z": 0}, ".": {"'": 0, "-": 0, ",": 0, "/": 0, ";": 0, "=": 0, "[": 0, "]": 0, "\\": 0, "a": 0, "`": 0, "c": 1, "b": 0, "e": 0, "d": 0, "g": 0, "f": 0, "i": 0, "h": 1, "k": 0, "j": 0, "m": 0, "l": 0, "o": 0, "n": 0, "q": 0, "p": 0, "s": 0, "r": 0, "u": 0, "t": 0, "w": 0, "v": 0, "y": 0, "x": 0, "z": 0}, ";": {"'": 0, "-": 0, ",": 0, "/": 0, ".": 0, "=": 0, "[": 0, "]": 0, "\\": 0, "a": 0, "`": 0, "c": 0, "b": 0, "e": 1, "d": 1, "g": 0, "f": 0, "i": 0, "h": 0, "k": 0, "j": 0, "m": 0, "l": 0, "o": 0, "n": 0, "q": 0, "p": 1, "s": 0, "r": 1, "u": 0, "t": 0, "w": 1, "v": 0, "y": 0, "x": 0, "z": 0}, "=": {"'": 0, "-": 0, ",": 0, "/": 0, ".": 0, ";": 0, "[": 0, "]": 0, "\\": 0, "a": 0, "`": 0, "c": 0, "b": 0, "e": 0, "d": 0, "g": 0, "f": 0, "i": 0, "h": 0, "k": 0, "j": 0, "m": 0, "l": 0, "o": 0, "n": 0, "q": 0, "p": 0, "s": 0, "r": 0, "u": 0, "t": 0, "w": 0, "v": 0, "y": 0, "x": 0, "z": 0}, "[": {"'": 0, "-": 0, ",": 0, "/": 0, ".": 0, ";": 0, "=": 0, "]": 0, "\\": 0, "a": 0, "`": 0, "c": 0, "b": 0, "e": 0, "d": 0, "g": 0, "f": 0, "i": 0, "h": 0, "k": 0, "j": 0, "m": 0, "l": 0, "o": 0, "n": 0, "q": 0, "p": 0, "s": 0, "r": 0, "u": 0, "t": 0, "w": 0, "v": 0, "y": 0, "x": 0, "z": 0}, "]": {"'": 0, "-": 0, ",": 0, "/": 0, ".": 0, ";": 0, "=": 0, "[": 0, "\\": 0, "a": 0, "`": 0, "c": 0, "b": 0, "e": 0, "d": 0, "g": 0, "f": 0, "i": 0, "h": 0, "k": 0, "j": 0, "m": 0, "l": 0, "o": 0, "n": 0, "q": 0, "p": 0, "s": 0, "r": 0, "u": 0, "t": 0, "w": 0, "v": 0, "y": 0, "x": 0, "z": 0}, "\\": {"'": 0, "-": 0, ",": 0, "/": 0, ".": 0, ";": 0, "=": 0, "[": 0, "]": 0, "a": 0, "`": 0, "c": 0, "b": 0, "e": 0, "d": 0, "g": 0, "f": 0, "i": 0, "h": 0, "k": 0, "j": 0, "m": 0, "l": 0, "o": 0, "n": 0, "q": 0, "p": 0, "s": 2, "r": 0, "u": 0, "t": 0, "w": 0, "v": 0, "y": 0, "x": 0, "z": 0}, "a": {"'": 0, "-": 0, ",": 0, "/": 0, ".": 0, ";": 0, "=": 0, "[": 0, "]": 0, "\\": 0, "`": 1, "c": 17, "b": 1, "e": 10, "d": 1, "g": 7, "f": 0, "i": 1, "h": 20, "k": 0, "j": 0, "m": 8, "l": 11, "o": 0, "n": 13, "q": 5, "p": 0, "s": 144, "r": 10, "u": 1, "t": 2, "w": 4, "v": 2, "y": 7, "x": 10, "z": 3}, "`": {"'": 0, "-": 0, ",": 0, "/": 0, ".": 0, ";": 0, "=": 0, "[": 0, "]": 0, "\\": 0, "a": 1, "c": 0, "b": 0, "e": 0, "d": 0, "g": 0, "f": 0, "i": 0, "h": 0, "k": 0, "j": 0, "m": 0, "l": 0, "o": 0, "n": 0, "q": 1, "p": 0, "s": 11, "r": 1, "u": 0, "t": 0, "w": 0, "v": 0, "y": 0, "x": 5, "z": 0}, "c": {"'": 0, "-": 0, ",": 0, "/": 1, ".": 1, ";": 0, "=": 0, "[": 0, "]": 0, "\\": 0, "a": 17, "`": 0, "b": 10, "e": 18, "d": 1, "g": 0, "f": 0, "i": 2, "h": 3, "k": 3, "j": 0, "m": 0, "l": 0, "o": 2, "n": 0, "q": 4, "p": 0, "s": 6, "r": 28, "u": 21, "t": 0, "w": 6, "v": 12, "y": 0, "x": 3, "z": 1}, "b": {"'": 0, "-": 0, ",": 0, "/": 0, ".": 0, ";": 0, "=": 0, "[": 0, "]": 0, "\\": 0, "a": 1, "`": 0, "c": 10, "e": 14, "d": 1, "g": 0, "f": 0, "i": 2, "h": 0, "k": 0, "j": 0, "m": 2, "l": 0, "o": 1, "n": 3, "q": 14, "p": 0, "s": 24, "r": 53, "u": 28, "t": 0, "w": 5, "v": 5, "y": 1, "x": 33, "z": 1}, "e": {"'": 1, "-": 0, ",": 0, "/": 2, ".": 0, ";": 1, "=": 0, "[": 0, "]": 0, "\\": 0, "a": 10, "`": 0, "c": 18, "b": 14, "d": 11, "g": 1, "f": 3, "i": 1, "h": 3, "k": 7, "j": 0, "m": 1, "l": 16, "o": 0, "n": 56, "q": 4, "p": 10, "s": 77, "r": 54, "u": 1, "t": 15, "w": 4, "v": 25, "y": 11, "x": 35, "z": 0}, "d": {"'": 0, "-": 0, ",": 0, "/": 0, ".": 0, ";": 1, "=": 0, "[": 0, "]": 0, "\\": 0, "a": 1, "`": 0, "c": 1, "b": 1, "e": 11, "g": 0, "f": 0, "i": 7, "h": 0, "k": 5, "j": 0, "m": 0, "l": 1, "o": 10, "n": 46, "q": 0, "p": 0, "s": 1, "r": 4, "u": 1, "t": 3, "w": 0, "v": 1, "y": 0, "x": 1, "z": 0}, "g": {"'": 0, "-": 0, ",": 0, "/": 0, ".": 0, ";": 0, "=": 0, "[": 0, "]": 0, "\\": 0, "a": 7, "`": 0, "c": 0, "b": 0, "e": 1, "d": 0, "f": 0, "i": 0, "h": 0, "k": 0, "j": 0, "m": 0, "l": 1, "o": 3, "n": 0, "q": 1, "p": 0, "s": 14, "r": 6, "u": 0, "t": 0, "w": 1, "v": 1, "y": 0, "x": 1, "z": 1}, "f": {"'": 0, "-": 0, ",": 0, "/": 0, ".": 0, ";": 0, "=": 0, "[": 0, "]": 0, "\\": 0, "a": 0, "`": 0, "c": 0, "b": 0, "e": 3, "d": 0, "g": 0, "i": 7, "h": 0, "k": 2, "j": 0, "m": 0, "l": 4, "o": 4, "n": 0, "q": 0, "p": 1, "s": 1, "r": 3, "u": 0, "t": 0, "w": 0, "v": 3, "y": 0, "x": 0, "z": 0}, "i": {"'": 5, "-": 0, ",": 0, "/": 0, ".": 0, ";": 0, "=": 0, "[": 0, "]": 0, "\\": 0, "a": 1, "`": 0, "c": 2, "b": 2, "e": 1, "d": 7, "g": 0, "f": 7, "h": 0, "k": 14, "j": 0, "m": 2, "l": 25, "o": 0, "n": 5, "q": 0, "p": 0, "s": 3, "r": 5, "u": 0, "t": 13, "w": 5, "v": 0, "y": 0, "x": 0, "z": 2}, "h": {"'": 0, "-": 0, ",": 0, "/": 0, ".": 1, ";": 0, "=": 0, "[": 0, "]": 0, "\\": 0, "a": 20, "`": 0, "c": 3, "b": 0, "e": 3, "d": 0, "g": 0, "f": 0, "i": 0, "k": 0, "j": 0, "m": 0, "l": 0, "o": 12, "n": 0, "q": 0, "p": 3, "s": 3, "r": 0, "u": 0, "t": 5, "w": 2, "v": 0, "y": 2, "x": 1, "z": 0}, "k": {"'": 0, "-": 0, ",": 0, "/": 0, ".": 0, ";": 0, "=": 0, "[": 0, "]": 0, "\\": 0, "a": 0, "`": 0, "c": 3, "b": 0, "e": 7, "d": 5, "g": 0, "f": 2, "i": 14, "h": 0, "j": 2, "m": 0, "l": 0, "o": 2, "n": 3, "q": 0, "p": 0, "s": 4, "r": 3, "u": 0, "t": 0, "w": 2, "v": 0, "y": 0, "x": 0, "z": 0}, "j": {"'": 0, "-": 0, ",": 0, "/": 0, ".": 0, ";": 0, "=": 0, "[": 0, "]": 0, "\\": 0, "a": 0, "`": 0, "c": 0, "b": 0, "e": 0, "d": 0, "g": 0, "f": 0, "i": 0, "h": 0, "k": 2, "m": 0, "l": 0, "o": 0, "n": 0, "q": 0, "p": 0, "s": 0, "r": 0, "u": 0, "t": 0, "w": 0, "v": 0, "y": 0, "x": 0, "z": 0}, "m": {"'": 0, "-": 0, ",": 0, "/": 0, ".": 0, ";": 0, "=": 0, "[": 0, "]": 0, "\\": 0, "a": 8, "`": 0, "c": 0, "b": 2, "e": 1, "d": 0, "g": 0, "f": 0, "i": 2, "h": 0, "k": 0, "j": 0, "l": 1, "o": 1, "n": 3, "q": 0, "p": 3, "s": 1, "r": 0, "u": 2, "t": 0, "w": 0, "v": 1, "y": 0, "x": 2, "z": 0}, "l": {"'": 0, "-": 0, ",": 0, "/": 0, ".": 0, ";": 0, "=": 0, "[": 0, "]": 0, "\\": 0, "a": 11, "`": 0, "c": 0, "b": 0, "e": 16, "d": 1, "g": 1, "f": 4, "i": 25, "h": 0, "k": 0, "j": 0, "m": 1, "o": 3, "n": 0, "q": 0, "p": 0, "s": 3, "r": 0, "u": 1, "t": 1, "w": 0, "v": 0, "y": 1, "x": 0, "z": 0}, "o": {"'": 0, "-": 0, ",": 0, "/": 0, ".": 0, ";": 0, "=": 0, "[": 0, "]": 0, "\\": 0, "a": 0, "`": 0, "c": 2, "b": 1, "e": 0, "d": 10, "g": 3, "f": 4, "i": 0, "h": 12, "k": 2, "j": 0, "m": 1, "l": 3, "n": 22, "q": 0, "p": 21, "s": 40, "r": 21, "u": 1, "t": 16, "w": 5, "v": 4, "y": 1, "x": 0, "z": 2}, "n": {"'": 2, "-": 0, ",": 0, "/": 0, ".": 0, ";": 0, "=": 0, "[": 0, "]": 0, "\\": 0, "a": 13, "`": 0, "c": 0, "b": 3, "e": 56, "d": 46, "g": 0, "f": 0, "i": 5, "h": 0, "k": 3, "j": 0, "m": 3, "l": 0, "o": 22, "q": 2, "p": 1, "s": 7, "r": 6, "u": 2, "t": 0, "w": 1, "v": 3, "y": 0, "x": 2, "z": 0}, "q": {"'": 0, "-": 0, ",": 0, "/": 0, ".": 0, ";": 0, "=": 0, "[": 0, "]": 0, "\\": 0, "a": 5, "`": 1, "c": 4, "b": 14, "e": 4, "d": 0, "g": 1, "f": 0, "i": 0, "h": 0, "k": 0, "j": 0, "m": 0, "l": 0, "o": 0, "n": 2, "p": 0, "s": 46, "r": 35, "u": 1, "t": 0, "w": 47, "v": 5, "y": 0, "x": 19, "z": 4}, "p": {"'": 0, "-": 0, ",": 0, "/": 0, ".": 0, ";": 1, "=": 0, "[": 0, "]": 0, "\\": 0, "a": 0, "`": 0, "c": 0, "b": 0, "e": 10, "d": 0, "g": 0, "f": 1, "i": 0, "h": 3, "k": 0, "j": 0, "m": 3, "l": 0, "o": 21, "n": 1, "q": 0, "s": 0, "r": 2, "u": 4, "t": 0, "w": 2, "v": 0, "y": 0, "x": 0, "z": 0}, "s": {"'": 12, "-": 0, ",": 0, "/": 1, ".": 0, ";": 0, "=": 0, "[": 0, "]": 0, "\\": 2, "a": 144, "`": 11, "c": 6, "b": 24, "e": 77, "d": 1, "g": 14, "f": 1, "i": 3, "h": 3, "k": 4, "j": 0, "m": 1, "l": 3, "o": 40, "n": 7, "q": 46, "p": 0, "r": 62, "u": 3, "t": 5, "w": 37, "v": 12, "y": 5, "x": 48, "z": 10}, "r": {"'": 0, "-": 0, ",": 0, "/": 0, ".": 0, ";": 1, "=": 0, "[": 0, "]": 0, "\\": 0, "a": 10, "`": 1, "c": 28, "b": 53, "e": 54, "d": 4, "g": 6, "f": 3, "i": 5, "h": 0, "k": 3, "j": 0, "m": 0, "l": 0, "o": 21, "n": 6, "q": 35, "p": 2, "s": 62, "u": 6, "t": 5, "w": 28, "v": 10, "y": 0, "x": 30, "z": 3}, "u": {"'": 0, "-": 0, ",": 0, "/": 0, ".": 0, ";": 0, "=": 0, "[": 0, "]": 0, "\\": 0, "a": 1, "`": 0, "c": 21, "b": 28, "e": 1, "d": 1, "g": 0, "f": 0, "i": 0, "h": 0, "k": 0, "j": 0, "m": 2, "l": 1, "o": 1, "n": 2, "q": 1, "p": 4, "s": 3, "r": 6, "t": 25, "w": 0, "v": 0, "y": 0, "x": 0, "z": 6}, "t": {"'": 6, "-": 0, ",": 0, "/": 0, ".": 0, ";": 0, "=": 0, "[": 0, "]": 0, "\\": 0, "a": 2, "`": 0, "c": 0, "b": 0, "e": 15, "d": 3, "g": 0, "f": 0, "i": 13, "h": 5, "k": 0, "j": 0, "m": 0, "l": 1, "o": 16, "n": 0, "q": 0, "p": 0, "s": 5, "r": 5, "u": 25, "w": 0, "v": 0, "y": 1, "x": 8, "z": 0}, "w": {"'": 0, "-": 0, ",": 0, "/": 0, ".": 0, ";": 1, "=": 0, "[": 0, "]": 0, "\\": 0, "a": 4, "`": 0, "c": 6, "b": 5, "e": 4, "d": 0, "g": 1, "f": 0, "i": 5, "h": 2, "k": 2, "j": 0, "m": 0, "l": 0, "o": 5, "n": 1, "q": 47, "p": 2, "s": 37, "r": 28, "u": 0, "t": 0, "v": 6, "y": 0, "x": 8, "z": 4}, "v": {"'": 0, "-": 1, ",": 0, "/": 0, ".": 0, ";": 0, "=": 0, "[": 0, "]": 0, "\\": 0, "a": 2, "`": 0, "c": 12, "b": 5, "e": 25, "d": 1, "g": 1, "f": 3, "i": 0, "h": 0, "k": 0, "j": 0, "m": 1, "l": 0, "o": 4, "n": 3, "q": 5, "p": 0, "s": 12, "r": 10, "u": 0, "t": 0, "w": 6, "y": 1, "x": 26, "z": 4}, "y": {"'": 2, "-": 0, ",": 0, "/": 0, ".": 0, ";": 0, "=": 0, "[": 0, "]": 0, "\\": 0, "a": 7, "`": 0, "c": 0, "b": 1, "e": 11, "d": 0, "g": 0, "f": 0, "i": 0, "h": 2, "k": 0, "j": 0, "m": 0, "l": 1, "o": 1, "n": 0, "q": 0, "p": 0, "s": 5, "r": 0, "u": 0, "t": 1, "w": 0, "v": 1, "x": 0, "z": 0}, "x": {"'": 0, "-": 0, ",": 0, "/": 0, ".": 0, ";": 0, "=": 0, "[": 0, "]": 0, "\\": 0, "a": 10, "`": 5, "c": 3, "b": 33, "e": 35, "d": 1, "g": 1, "f": 0, "i": 0, "h": 1, "k": 0, "j": 0, "m": 2, "l": 0, "o": 0, "n": 2, "q": 19, "p": 0, "s": 48, "r": 30, "u": 0, "t": 8, "w": 8, "v": 26, "y": 0, "z": 1}, "z": {"'": 0, "-": 0, ",": 0, "/": 0, ".": 0, ";": 0, "=": 0, "[": 0, "]": 0, "\\": 0, "a": 3, "`": 0, "c": 1, "b": 1, "e": 0, "d": 0, "g": 1, "f": 0, "i": 2, "h": 0, "k": 0, "j": 0, "m": 0, "l": 0, "o": 2, "n": 0, "q": 4, "p": 0, "s": 10, "r": 3, "u": 6, "t": 0, "w": 4, "v": 4, "y": 0, "x": 1}};

                //console.log(Object.keys(digrams).length);

                var repaint = function(){
                    var data = [],
                        max = 00,
                        temp = {},
                        coordinates = app.coordinates;

                    for(var i = 0; i < Object.keys(counts).length; i++){

                        var key = Object.keys(counts)[i];
                        if(/^[A-Za-z]$/.test(key)){
                            key = key.toUpperCase();
                        }
                        if(app.config.exclude && app.EXCLUDES.indexOf(key == -1)){
                            var coord;
                            coord = coordinates[key];

                            if(coord){
                                for(var s = 0; s < coord.length; s += 2) {
                                    var joined = coord.slice(s, s+2).join(";");
                                    if(!temp[joined])
                                        temp[joined] = 0;

                                    temp[joined] = counts[key.toLowerCase()];
                                }
                            }
                        }
                    }

                    for(var k in temp){
                        //console.log(k);
                        var xy = k.split(";");
                        var val = temp[k];

                        data.push({x: xy[0], y: xy[1], count: val});

                        if(val > max)
                            max = val;
                    }
                    
                    app.heatmap.store.setDataSet({max: max, data: data});
                }//end repaint function

                var $ = function(id){
                    return document.getElementById(id);
                };

                var gradients = [
                    { 0.45: "rgb(0,0,255)", 0.55: "rgb(0,255,255)", 0.65: "rgb(0,255,0)", 0.95: "yellow", 1.0: "rgb(255,0,0)"},
                    { 0.45: "rgb(255,255,255)", 0.70: "rgb(0,0,0)",0.9: "rgb(2,255,246)", 1.0: "rgb(3,34,66)"},
                    { 0.45: "rgb(216,136,211)", 0.55: "rgb(0,255,255)", 0.65: "rgb(233,59,233)", 0.95: "rgb(255,0,240)", 1.0: "yellow"}
                ];
                /*
                $("apply").onclick = function(){
                    
                    var cfg = {};
                    //cfg.radius = Math.pow(10,$("fingertip").selectedIndex) +40;
                    //cfg.gradient = gradients[$("gradient").selectedIndex];
                    cfg.layout =  $("layout").value;
                    app.heatmap.cleanup();
                    app.init(cfg);
                    repaint();

                    
                }
                */
                repaint();

                var reDraw = function(){
                    var cfg = {};
                    cfg.layout =  $("layout").value;
                    app.heatmap.cleanup();
                    app.init(cfg);
                    console.log("redrawn");
                    repaint();

                }

                document.addEventListener("click", redrawOnClick, false);

                function redrawOnClick(e) {
                    ele = (function getPosition(element) {
    var xPosition = 0;
    var yPosition = 0;
  
    while(element) {
        xPosition += (element.offsetLeft - element.scrollLeft + element.clientLeft);
        yPosition += (element.offsetTop - element.scrollTop + element.clientTop);
        element = element.offsetParent;
    }
    return { x: xPosition, y: yPosition };
})(document.getElementById("keyboard"));
                    var xPosition = e.clientX - ele.x;
                    var yPosition = e.clientY - ele.y;
                    console.log('elex: ' + ele.x + ' eley: '+ ele.y);
                    console.log('x: ' + xPosition + ' y: '+ yPosition); //or return from this function

                    if( ((640) <= xPosition) && ((800) >= xPosition) && ((-120) <= yPosition) && ((-40) >= yPosition) ){
                        reDraw();
                        return;
                    }

                    var ans; // key that is clicked

                    for(var key in app.coordinates){
                        //console.log("x: " + app.coordinates[key][0] + " y: " + app.coordinates[key][1]);
                        var x = app.coordinates[key][0];
                        var y = app.coordinates[key][1];

                        //which key is pressed??
                        
                        if ( ((x-20) <= xPosition) && ((x+20) >= xPosition) && ((y-20) <= yPosition) && ((y+20) >= yPosition) ){
                            console.log('key: ' + key);
                            ans = key;
                            break;
                        }
                        else{
                            console.log("no key works");
                        }
                    } // end for

                    // redraw
                    for (var k in digrams){
                        //console.log("inside di: " + key)

                        if (ans){
                            if(k.indexOf(ans.toLowerCase()) != -1){
                                //console.log("key " + k + " ans: " + ans.toLowerCase());
                                //console.log(ans);
                                console.log(digrams[ans.toLowerCase()]);
                                counts = digrams[ans.toLowerCase()];
                                reDraw();
                                return;
                            }
                        }

                    }

                    // get new data and then call repaint?
                    //reDraw();


                } // end function

            })();
        </script>
    </body>
</html>